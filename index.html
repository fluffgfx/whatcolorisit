<!DOCTYPE html>
<html>
    <head>
        <title>What colour is it?</title><meta charset="UTF-8" ><link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300' rel='stylesheet' type='text/css'>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
        <style>

        @media all and (max-width: 1024px) {

        h1 { font-family:"open sans"; font-size:40px; font-weight:300; color:white; transition:all 0.6s; -webkit-transition:all 0.6s;}
        h2 { font-family:"open sans"; font-size:20px; font-weight:300; color:white; transition:all 0.6s; -webkit-transition:all 0.6s;}

        }

        @media all and (min-width: 1024px) {

        h1 { font-family:"open sans"; font-size:120px; font-weight:300; color:white; transition:all 0.6s; -webkit-transition:all 0.6s;}
        h2 { font-family:"open sans"; font-size:30px; font-weight:300; color:white; transition:all 0.6s; -webkit-transition:all 0.6s;}

        }

        table { position:absolute; width:100%; height:100%; top:0px; left:0px;}
        .fb-like {position:static; width:100px;}
        </style>
    </head>
<body onLoad="doTheThing()">
    <table>
        <td height="100%" width="100%" align="center" valign="middle">
            <h1 id="t"></h1><br>
            <h2 id="h"></h2>
        </td>
    </table>
</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

<script type="text/javascript">
    
    function doTheThing(){
        
        function checkProperLength(color){
            if(color.length < 2){
                return "0" + color;
            } else {
                return color;
            }
        }
        
        function timeToHex(time){
            if(time === 0){
                return "#000000"
            } else if(time > 0 && time < 256){
                return "#" + checkProperLength(time.toString(16)) + "0000";
            } else if(time === 256){
                return "#ff0000";
            } else if(time > 256 && time < 768){
                return "#" + 
                    checkProperLength((((768 - time)/2) - 
                     ((time%2)/2)).toString(16)) + 
                    checkProperLength((((time - 256)/2) -
                     ((time%2)/2)).toString(16)) +
                    "00";
            } else if(time === 768){
                return "#00ff00";
            } else if(time > 768 && time < 1280){
                return "#00" +
                    checkProperLength((((1280 - time)/2) -
                     ((time%2)/2)).toString(16)) +
                    checkProperLength((((time - 768)/2) -
                     ((time%2)/2)).toString(16));
            } else if(time === 1280){
                return "#0000ff";
            } else if(time > 1280 && time < 1536){
                return "#0000" + checkProperLength((1536 - time).toString(16));
            } else if(time === 1536) {
                return "#000000";
            } else {
                console.log("something broke");
            }
        }
        
        function getDayColor(date) {
            var year = date.getFullYear();
            var month = date.getMonth();
            var day = date.getDate();
            var daysSoFar = 0;
            var colorOfTheDay = 0;

            if(year%4 === 0){ //then it's a leap year
                if(month === 0){ daysSoFar = day; }
                else if(month === 1){ daysSoFar = 31 + day; }
                else if(month === 2){ daysSoFar = 60 + day; }
                else if(month === 3){ daysSoFar = 91 + day; }
                else if(month === 4){ daysSoFar = 121 + day; }
                else if(month === 5){ daysSoFar = 152 + day; }
                else if(month === 6){ daysSoFar = 182 + day; }
                else if(month === 7){ daysSoFar = 213 + day; }
                else if(month === 8){ daysSoFar = 244 + day; }
                else if(month === 9){ daysSoFar = 274 + day; }
                else if(month === 10){ daysSoFar = 305 + day; }
                else if(month === 11){ daysSoFar = 335 + day ;}
                colorOfTheDay = Math.round(daysSoFar*(1536/366));
            }else{
                if(month === 0){ daysSoFar = day; }
                else if(month === 1){ daysSoFar = 31 + day; }
                else if(month === 2){ daysSoFar = 59 + day; }
                else if(month === 3){ daysSoFar = 90 + day; }
                else if(month === 4){ daysSoFar = 120 + day; }
                else if(month === 5){ daysSoFar = 151 + day; }
                else if(month === 6){ daysSoFar = 181 + day; }
                else if(month === 7){ daysSoFar = 212 + day;}
                else if(month === 8){ daysSoFar = 243 + day; }
                else if(month === 9){ daysSoFar = 273 + day; }
                else if(month === 10){ daysSoFar = 304 + day; }
                else if(month === 11){ daysSoFar = 334 + day; }
                colorOfTheDay = Math.round(daysSoFar*(1536/365));
            }

            return timeToHex(colorOfTheDay);
            
        }
        
        function getTimeColor(date){
            var hours = date.getHours() + 1;
            var mins = date.getMinutes() + 1;
            var secs = date.getSeconds() + 1;
            var secondsSinceMidnight = Math.round(hours*3600 + mins*60 + secs);
            var colorOfTheTime = Math.round(secondsSinceMidnight/56.25);
            return timeToHex(colorOfTheTime);
        }    

        function updateClock(){

            var d = new Date();
            var hours = d.getHours();
            var mins = d.getMinutes();
            var secs = d.getSeconds();
            var colorOfTheDayHex = getDayColor(d);
            var colorOfTheTimeHex = getTimeColor(d);
            
            if (hours < 10){hours = "0" + hours};
            if (mins < 10){mins = "0" + mins};
            if (secs < 10){secs = "0" + secs};
            
            console.log(colorOfTheDayHex);
            console.log(colorOfTheTimeHex);

            $("body").css({"transition": "all 0.8s", "-webkit-transition": "all 0.8s"});
            $("#t").html(hours + " : " + mins);
            $("#h").html(colorOfTheDayHex.toString() + " , " + colorOfTheTimeHex.toString());
            document.body.style.background = "linear-gradient( to right bottom, " + 
                colorOfTheDayHex.toString() + ", " + colorOfTheTimeHex.toString() + " )";

            setTimeout(function(){ updateClock();}, 1000);
        }
        
        updateClock();
        
    }

</script>

</html>
